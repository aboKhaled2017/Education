{"version":3,"file":"videoOper.js","sourceRoot":"","sources":["videoOper.ts"],"names":[],"mappings":"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","sourcesContent":["import videojs from '../../../../lib/video/customVideo-js';\r\nimport { beforeVideoSetup } from '../../../../lib/video/customVideo-js';\r\n/*this object construct videos and loading thier data */\r\nexport const videoStarter = () => {\r\n  return {\r\n    firstPlayerVideo: document.getElementById(\"guidalVideo\"),\r\n    secondPlayerVideo: document.getElementById(\"educationVideo\"),\r\n    get secondPlayer() {\r\n      return videojs(this.secondPlayerVideo, {\r\n        controlBar: { volumePanel: { inline: false } },\r\n        notSupportedMessage: \"please support Javascript in browser\",\r\n        // height: 234,\r\n        preload: \"false\"\r\n      });\r\n    },\r\n    firstPlayer() {\r\n      var firstPlayer = videojs(\r\n        this.firstPlayerVideo,\r\n        {\r\n          controlBar: { volumePanel: { inline: false } },\r\n          notSupportedMessage: \"please support Javascript in browser\",\r\n          //  height: 234,\r\n          preload: \"auto\"\r\n        },\r\n        function() {\r\n          //on ready\r\n          (firstPlayer.play() as Promise<void>)\r\n            .then(() => {\r\n              firstPlayer.one(\"ended\", e => {\r\n                this.play();\r\n              });\r\n            })\r\n            .catch(e => {\r\n              firstPlayer.play();\r\n            });\r\n        }.bind(this.secondPlayer)\r\n      );\r\n      return firstPlayer;\r\n    },\r\n     async start() {\r\n         await beforeVideoSetup.start();\r\n      this.firstPlayer();\r\n      handleVideosOperationAfterCreated().start();\r\n    }\r\n  };\r\n};\r\n/*this object make our modifications for videos*/\r\nconst handleVideosOperationAfterCreated = () => {\r\n  return {\r\n    videoJsElements: document.querySelectorAll(\"video-js\"),\r\n    start() {\r\n      this.handleVideoOpacity();\r\n      this.createFluidButton();\r\n      this.addingVideoFluidButtons();\r\n      this.bigButtonShowAndHide.call(this.videoJsElements);\r\n    },  \r\n    initalizeVideo: function(video: videojs.Player) {\r\n      let vidEl = $(video.el());\r\n      vidEl.data(\"parent\", vidEl.parent());\r\n    },\r\n    toggleFluid: function() {},\r\n    sourceOfFluidVidoe: null,\r\n    destinationOfFluidVideo: $(\"#fluidPlayer\") as JQuery<Element>,\r\n    createFluidButton: function() {\r\n      let that = this;\r\n      var btnFluidComponent = videojs.getComponent(\"Button\");\r\n      var btnFluid = videojs[\"extend\"](btnFluidComponent, {\r\n        constructor: function() {\r\n          btnFluidComponent.apply(this, arguments as any);\r\n        },\r\n        handleClick: function() {\r\n          let videoPlayer = (this as videojs.Component).player();\r\n          let isFluid = videoPlayer[\"fluid_\"];\r\n          if (isFluid) {\r\n            videoPlayer.fluid(false);\r\n            let videoEl = $(videoPlayer.el()).remove();\r\n            that.sourceOfFluidVidoe.append(videoEl);\r\n            that.destinationOfFluidVideo.hide();\r\n          } else {\r\n            videoPlayer.fluid(true);\r\n            let videoEl = $((this as videojs.Component).player().el());\r\n            that.sourceOfFluidVidoe = videoEl.parent();\r\n            that.destinationOfFluidVideo.append(videoEl.remove()).show();\r\n          }\r\n        },\r\n        buildCssClass: function() {\r\n          return \"class1 class2\";\r\n        },\r\n        createControlTextEl: function(button) {\r\n          return $(button).html(\"<i class='fa fa-random'></i>\");\r\n        }\r\n      });\r\n      videojs.registerComponent(\"btnFluid\", btnFluid);\r\n    },\r\n    bigButtonShowAndHide: function() {\r\n      $(this)\r\n        .find(\"video\")\r\n        .on({\r\n          pause: function() {\r\n            $(this)\r\n              .parent(\"video-js\")\r\n              .find(\".vjs-big-play-button\")\r\n              .show();\r\n          },\r\n          play: function() {\r\n            $(this)\r\n              .parent(\"video-js\")\r\n              .find(\".vjs-big-play-button\")\r\n              .hide();\r\n          }\r\n        });\r\n    },\r\n    addingVideoFluidButtons: function() {\r\n      for (let player of Object.values(videojs.getPlayers())) {\r\n        this.initalizeVideo(player);\r\n        player.controlBar.addChild(\"btnFluid\", {\r\n          tabIndex: 3\r\n        });\r\n        let seekBtn = player.controlBar.getChild(\r\n          \"SeekToLive\"\r\n        ) as videojs.Component;\r\n        player.controlBar.removeChild(seekBtn);\r\n      }\r\n    },\r\n    handleVideoOpacity: function() {\r\n      $(\".video-player\").on({\r\n        mouseenter: function() {\r\n          $(this).css(\"opacity\", \"1\");\r\n        },\r\n        mouseleave: function(e) {\r\n          let video = this.querySelector(\"video\") as HTMLVideoElement;\r\n          if (video.paused || video.ended) {\r\n            $(this).css(\"opacity\", \".7\");\r\n          }\r\n        }\r\n      });\r\n    }\r\n  };\r\n};\r\n"]}