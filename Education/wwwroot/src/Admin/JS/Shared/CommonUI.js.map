{"version":3,"file":"CommonUI.js","sourceRoot":"","sources":["CommonUI.ts"],"names":[],"mappings":"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","sourcesContent":["import {CategoryListItem } from './Interfaces';\r\nexport class CommonUi {\r\n  public static NotInputForBtnNow(GeneralBtn: JQuery) {\r\n    GeneralBtn.click(function(e) {\r\n      let btn = $(this);\r\n      let input = btn.parents(\".form-group:eq(0)\").find(\"input:eq(0)\");\r\n      if (btn.is(\":checked\")) {\r\n        input.data(\"value\", input.val() as string);\r\n        input.attr(\"disabled\", \"disabled\").val(\"\");\r\n        input.prop(\"placeholder\", input.data(\"notnow\"));\r\n        if (input.is(\".withDate\")) {\r\n          input.attr(\"type\", \"text\");\r\n        }\r\n      } else {\r\n        let dataVal = input.data(\"value\");\r\n        input.removeAttr(\"disabled\").prop(\"placeholder\", input.data(\"prompt\"));\r\n        if (dataVal) input.val(dataVal);\r\n        if (input.is(\".withDate\")) {\r\n          input.attr(\"type\", \"date\");\r\n        }\r\n      }\r\n      input.triggerHandler(\"change\");\r\n    });\r\n  }\r\n  public static GetCategoryNameById(\r\n    id: string,\r\n    dataList: CategoryListItem[]\r\n  ): string {\r\n    return (dataList.find(v => v.id == id) as CategoryListItem).name;\r\n  }\r\n  public static GetFullCategoryNameById(\r\n    id: string,\r\n    dataList: CategoryListItem[]\r\n  ): string {\r\n    let superId = (dataList.find(v => v.id == id) as CategoryListItem).superId;\r\n    return superId == null\r\n      ? (dataList.find(v => v.id == id) as CategoryListItem).name\r\n      : `${(dataList.find(v => v.id == superId) as CategoryListItem).name}/\r\n               ${(dataList.find(v => v.id == id) as CategoryListItem).name}`;\r\n  }\r\n  public SelectCategoryDataList: CategoryListItem[] = [];\r\n  public OnCategorySelected: () => void = () => {};\r\n  public DefaultMenuValues = {\r\n    text: \"اختر اسم القسم\",\r\n    id: \"\"\r\n  };\r\n  constructor(\r\n    private selectCategoryBtn: JQuery,\r\n    private CategoryIdInp: JQuery,\r\n    private dataUrl: string = \"/Admin/Category/ItemsList\"\r\n  ) {}\r\n  private MakeDropDownMenuForCategories(\r\n    data: CategoryListItem[],\r\n    SuperId: null = null\r\n  ): JQuery<HTMLElement> {\r\n    let ElsContainer = $();\r\n    for (let category of data) {\r\n      if (category.superId != SuperId) continue;\r\n      if (category.subs.length == 0) {\r\n        let item = $(`<li><a tabindex=\"-1\">${category.name}</a></li>`);\r\n        item.data(\"id\", category.id).data(\"name\", category.name);\r\n        ElsContainer = ElsContainer.add(item);\r\n      } else {\r\n        let item = $(`<li class=\"dropup\">\r\n                        <a class=\"sub dropdown-toggle\" data-toggle=\"dropdown\" tabindex=\"-1\">\r\n                            ${category.name} <span class=\"caret\"></span>\r\n                        </a>\r\n                    </li>`);\r\n        let SubMenu = $(`<ul class=\"dropdown-menu subMenu dropdown-menu-right\" role=\"menu\" style=\"display: none\">\r\n                        </ul>`);\r\n        let SubList: CategoryListItem[] = this.SelectCategoryDataList.filter(\r\n          (item, index) => {\r\n            if (category.subs.indexOf(item.id) >= 0) return item;\r\n          }\r\n        );\r\n        SubMenu.append(\r\n          this.MakeDropDownMenuForCategories(SubList, category.id as any)\r\n        );\r\n        item.append(SubMenu);\r\n        item.data(\"id\", category.id);\r\n        ElsContainer = ElsContainer.add(item);\r\n      }\r\n    }\r\n    return ElsContainer;\r\n  }\r\n  private HandleDropDownMenu() {\r\n    let mainObj = this;\r\n    $(\".dropdown a.sub,.dropup a.sub\").on(\"click\", function(e) {\r\n      $(this)\r\n        .next(\"ul\")\r\n        .toggle();\r\n      e.stopPropagation();\r\n      e.preventDefault();\r\n    });\r\n    this.selectCategoryBtn\r\n      .data(\"text\", this.DefaultMenuValues.text)\r\n      .data(\"id\", this.DefaultMenuValues.id)\r\n      .find(\"li\")\r\n      .css(\"cursor\", \"pointer\")\r\n      .not(\".dropdown\")\r\n      .on(\"click\", function(e) {\r\n        let el = $(this);\r\n        let text = CommonUi.GetFullCategoryNameById(\r\n          el.data(\"id\") as string,\r\n          mainObj.SelectCategoryDataList\r\n        );\r\n        mainObj.selectCategoryBtn.find(\"button .text\").text(text);\r\n        el.parents(\".subMenu\").hide();\r\n        mainObj.CategoryIdInp.val(el.data(\"id\")).trigger(\"change\");\r\n        mainObj.OnCategorySelected();\r\n        e.stopPropagation();\r\n      });\r\n  }\r\n  public async CreateCategoryBtnList(AfterCreated: () => void) {\r\n    let ElsContainer = $();\r\n    await $.get(this.dataUrl).done(result => {\r\n      this.SelectCategoryDataList = result.data;\r\n      this.SetMenuTextForCurrentId();\r\n      this.selectCategoryBtn\r\n        .find(\".text\")\r\n        .text(this.DefaultMenuValues.text)\r\n        .end()\r\n        .find(\".dropdown-menu\")\r\n        .empty()\r\n        .append(this.MakeDropDownMenuForCategories(result.data));\r\n      this.HandleDropDownMenu();\r\n      AfterCreated();\r\n    });\r\n  }\r\n  private SetMenuTextForCurrentId() {\r\n    if (this.DefaultMenuValues.id == \"\") return;\r\n    this.DefaultMenuValues.text = CommonUi.GetFullCategoryNameById(\r\n      this.DefaultMenuValues.id,\r\n      this.SelectCategoryDataList\r\n    );\r\n  }\r\n  public SetMenuTextForCategoryId(id: string, text?: string): CommonUi {\r\n    if (text) this.DefaultMenuValues.text = text;\r\n    this.DefaultMenuValues.id = id;\r\n    return this;\r\n  }\r\n}\r\nexport class CommonButtons {\r\n    public static DeleteBtn = (): JQuery => {\r\n        return $(`<button class=\"controlBtn delete  btn btn-danger\">\r\n              <span>حذف </span>\r\n              <i class=\"fa fa-remove\"></i>\r\n            </button>`);\r\n    }\r\n    public static SaveBtn = (): JQuery => {\r\n    return $(`<button class=\"controlBtn save  btn btn-primary\">\r\n                <span>حفظ </span>\r\n                <i class=\"fa fa-check-circle\"></i>\r\n            </button>`);\r\n    }\r\n    public static EditBtn = (): JQuery => {\r\n        return $(`<button class=\"controlBtn edit  btn btn-info\">\r\n                <span>تعديل </span>\r\n                <i class=\"fa fa-edit\"></i>\r\n            </button>`);\r\n    }\r\n    public static CustomBtn = (label:string,iconClass:string): JQuery => {\r\n        return $(`<button class=\"controlBtn edit  btn btn-info\">\r\n                <span>${label} </span>\r\n                <i class=\"fa ${iconClass}\"></i>\r\n            </button>`);\r\n    }\r\n}"]}