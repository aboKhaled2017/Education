{"version":3,"file":"CourseContent.js","sourceRoot":"","sources":["CourseContent.ts"],"names":[],"mappings":"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","sourcesContent":["import \"../../../global/helperDome\";\r\nimport \"../../../global/Extensions/NumberExten\";\r\nimport \"../../../global/Extensions/JavascriptExt\";\r\nimport \"../../../global/Extensions/AjaxExte\";\r\nimport \"../../../global/Extensions/JqueryExten\";\r\nimport { CommonUi } from \"../Shared/CommonUI\";\r\nimport {  CategoryListItem, Course, ICourse } from '../Shared/Interfaces';\r\nimport { Binding } from \"../Shared/Bindings\";\r\nimport { CommonFuncs } from \"./SharedCoursesFuncs\"; \r\nimport { MainObjectOperForCourse } from \"./_MainObjectOperForCourse\";\r\nimport { AddCourseVideoTutorialsOper } from \"./_AddCourseVideo\";\r\nimport { CourseVideosTableOper } from \"./_CourseVideosTable\";\r\nexport let ContentOfCourseOprs = {\r\n  SelectCategoryDataList: [] as CategoryListItem[],\r\n  get DropdownUi() {\r\n    return new CommonUi(this.selectCategoryBtn, this.CategoryIdInp);\r\n  },\r\n  selectCategoryBtn: $(\"#Categories\"),\r\n  CategoryIdInp: $(\"#CategoryId\"),\r\n  EditCourseForm: $(\"#EditCourse form:eq(0)\"),\r\n  submitBtn: $(\"#EditCourseBtn\"),\r\n  NotNowBtn: $(\".notNowBtn\"),\r\n  ChangeImgBtn: $(\"#changeImage\"),\r\n  VideoCountText: $(\"#videoCountText\"),\r\n  HandleToggleBtn() {\r\n    this.EditCourseForm.find(\".toogleBtn:eq(0)\").click(e => {\r\n      let iconbtn = $(e.target);\r\n      iconbtn.toggleClass(\"fa-toggle-on fa-toggle-off\");\r\n      let text = \"\",\r\n        isOpened = false;\r\n      if (iconbtn.hasClass(\"fa-toggle-on\")) {\r\n        text = \"الكورس متاح الان\";\r\n        isOpened = true;\r\n      } else {\r\n        text = \"الكورس غير متاح الان\";\r\n        isOpened = false;\r\n      }\r\n      this.EditCourseForm.find(\".toggleText:eq(0)\").text(text);\r\n      $(\"#IsOpened\")\r\n        .val(`${isOpened}`)\r\n        .triggerHandler(\"change\");\r\n    });\r\n  },\r\n  OnEditCourseFormSubmitted(Menu: any) {\r\n    this.submitBtn.click(() => {\r\n      if (!this.EditCourseForm.valid()) return;\r\n      this.EditCourseForm.ajaxSubmit(\r\n        \"/Admin/Courses/Edit\",\r\n        \"POST\",\r\n        false,\r\n          (def, model) => {\r\n          def\r\n            .done(() => {\r\n              let Model: Course = {} as Course;\r\n              for (let prop in model) {\r\n                let Prop =\r\n                  prop.charAt(0).toLocaleLowerCase() + \"\" + prop.slice(1);\r\n                (Model as any)[Prop] = model[prop];\r\n              }\r\n              Model.categoryName = CommonUi.GetFullCategoryNameById(\r\n                Model.categoryId,\r\n                Menu.SelectCategoryDataList\r\n              );\r\n              $.notify(\r\n                { message: \"تم تعديل الكورس بنجاح\", target: \"#EditCourse\" },\r\n                { z_index: 999999999 }\r\n              );\r\n            })\r\n            .catch(e => {\r\n              $.notifyCatch(e.responseJSON);\r\n            })\r\n            .always(e => {\r\n              this.submitBtn.pendingState(false);\r\n            });\r\n        },\r\n        () => {\r\n          this.submitBtn.pendingState(true, \"fa-edit\");\r\n        }\r\n      );\r\n    });\r\n  },\r\n  ExecuteBindings() {\r\n        MainObjectOperForCourse.a = \"ali\"; \r\n        MainObjectOperForCourse.CourseDataController= Binding.controller<ICourse>('courseData', (scope) => {\r\n            scope.VideosCount = this.VideoCountText.data('val');\r\n        }, (value, prop) => {\r\n            switch (prop) {\r\n                case \"CostOfCourse\":\r\n                    return value ? `${value} جنية` : `غير محددة`;\r\n                case \"Period\":\r\n                    return value ? `مدة الكورس : ${value}` : `مدة الكورس غير محددة`;\r\n                case \"StartDateOfBegin\":\r\n                    return value\r\n                        ? `بداية انطلاق الكورس من ${new Date(value).toDateString()}`\r\n                        : `تاريخ بداية الكورس غير محددة`;\r\n                case \"IsOpened\":\r\n                    return value == \"true\"\r\n                        ? \"الكورس متاح حاليا\"\r\n                        : \"الكورس غير متاح حتى الان\";\r\n                case \"CategoryId\":\r\n                    return `قسم ${CommonUi.GetFullCategoryNameById(\r\n                        value,\r\n                        this.SelectCategoryDataList\r\n                    )}`;\r\n                case \"VideosCount\":\r\n                    return ((value as any) as number) > 0\r\n                        ? `عدد الفديوهات ${value}`\r\n                        : \"لا يوجد فديوهات مضافة لهذا الكورس\";\r\n                default:\r\n                    return value;\r\n            }\r\n            });\r\n     },\r\n  HandleChangeImageBackOfCourse() {\r\n        CommonFuncs.UploadCourseImage(this.ChangeImgBtn, MainObjectOperForCourse.ImgBackOfCourse, $(\r\n      \"#Id\"\r\n        ).val() as string, (newUrl) => {\r\n            MainObjectOperForCourse.CourseDataController.Model.BackgroundImgSrc = newUrl;\r\n    });\r\n    },\r\n  async DropdownMenuUi() {\r\n        let DropdownMenuUi = this.DropdownUi;\r\n        DropdownMenuUi.SetMenuTextForCategoryId(this.CategoryIdInp.val() as string);\r\n        await DropdownMenuUi.CreateCategoryBtnList(() => {\r\n            this.SelectCategoryDataList = DropdownMenuUi.SelectCategoryDataList;\r\n            this.ExecuteBindings();\r\n        });\r\n      DropdownMenuUi.OnCategorySelected = () => { };\r\n      return DropdownMenuUi;\r\n  },\r\n  async Main() { \r\n    CommonUi.NotInputForBtnNow(this.NotNowBtn);\r\n      this.OnEditCourseFormSubmitted(await this.DropdownMenuUi());\r\n    this.HandleToggleBtn();\r\n    this.HandleChangeImageBackOfCourse();\r\n\r\n  }\r\n};\r\n$(async function () {\r\n    await ContentOfCourseOprs.Main();    \r\n    CourseVideosTableOper.Main();    \r\n    MainObjectOperForCourse.OnTableLoaded.then(table => {\r\n        AddCourseVideoTutorialsOper.Main(); \r\n    })\r\n});\r\n"]}